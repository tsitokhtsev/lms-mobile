import requests

loginUrl = "http://lms.tsu.ge/Home/Login"
studentCardUrl = "http://lms.tsu.ge/StudentCard/GetStudentProfilesVW2?_dc=1656070459063"

def login(username, password):
    with requests.Session() as session:
        loginPayload = {
            "UserName": username,
            "Password": password,
            "RememberMe": False,
            "ReturnUrl": "/home/studenttype"
        }

        loginHeaders = {
            "Cookie": "_ga=GA1.2.1582755388.1651498383; Culture=ka; cookiesession1=678A3E0FIKLMNOPQRSTUVWXYZABC859A; ASP.NET_SessionId=p0f1weczxfi1eub3swb03kyu; _gid=GA1.2.953066409.1656423892; _gat=1; .ASPXAUTHSP_STUDENTPORTAL=0F75489D37FCE05D869D5FBFCCF4C5CC97495999820D17F808BC20FA3A9015ED03140FDD6F6E29B554A47BDE3BEB79AB56C3C27A00572EFC50BB2D2836FD4269BC6A400F26D92D2BBDB76DC99DF739B55891F7715D117E5DF9FB762574E04A04B264EC9B6059F92B82605C9ADA6AC1AEE6411E6B029AAD44062D3AB38EB0C8777BCA5F636165E993D43EF06BD91688AD93173DFC9016D2B3A7E931933114C59554EFBC2BB6CFDB209CD760F27ED11A99D5266A5150E0FB5C297B4D3AE9FDD245F3C61C679A13BAC8E0BCE847BD94CDD21B14AA115FCFD6861B1F694D31C95241F92C118453DA30C9CA5F21D73D97DABC29BC9DED37D489299579055AD7630DDFF72D4D27632C05E74703C05C9CBA3D4D4C19B0E8616A61A4EF7CA4EA06AE65974592D67253A06CB7903EB4B6F23B16063C37D3A0A1281409248372227C01FDD691662D98DD9B96C7C7A96881034E840D40808429A6D6A1BE6C0833A7A1783354A94D2F42E6EEDA2382E8DD087D2B77575B0D65CBAA998CE0A92CA143FB35B57CBBD953369B7BC1CE84B7594A658479E8BCB4E980C73BBBFAA1A6893655A90EE56AD7EDB7B5461F8B29A3E5051E1DC8687B0A36800CB1C8D2D808A618312743620BC7913D968A30EB08AD355F67CBDA6D466E48449DD4810058CCFA54EF1442F61833AAB668D9EC9DF2C1DB98B11D79A9BFFC6C0904255C706E3AD7315C63D934838CF040C12B777D1B797993C01C86C13BD20FD68291F2346C889E9EFC0D43577169C113CF0344EED3FE9D79B972D92FA4203804E7B4267A7B2CD98448BD8303B49D308F48B727E4F73E79D8A4465375B89A281597FA211F33CAF39AACD9FB7F6E23B5697C21D5DB31DD17FCC8E84C5EAF363C989965F9A5F7ED71603FAD0058FFD832671983F1EA38D3CF7F541EFD3ED2D2D917DB54615701C1B46C1FD48A4E2731839A3635EB033573FD7C5A43DA8374FF7ED42846B92E3774E17EE3E308C4192D8ED948AC876210F28B6A170B12C466357DEDEA273A1F1787C77A47415A46C2329D6A76529FCC2346376FBE302445F4B3CC5ACF9918D4B770C5868E38553C9A9502CC5AEB62407F75A59157763E259AE97F6821A65B0700F2017931B9C4E43A22A80FA3E5B267F6A491A4845E1B6386FFAF7BE2D61B29F52C7FC4F65EA09B3A9D564B36CB0CC898B14A671F67A8E3B73332591E93822B7CB3D06FF9EA7694B05386ACE17A7B22700E00AC75A941FF307DCAD12271A611030C0F80D4F2205EA3ECCE3A7FF40F4A884AB384C3518BCD2F1573A6E73B3DF80183CCA07C8B9D48F742E1136235D2A892676F84585472692B45107B0A5A08A74C7F4409B1E4CDEA4C22849AD3E0B0DC3B64CAC8B6EF171F1A863297F20B925E63B8B80E3E837424E26F378CAF48581A566C935C03C889ACED491CFFCCD8EF8EFBF8014014AFEFF25722E13F1F78C899D5AA18014587A0D94A82F184932FF0C164AD70D65D3C227BA3DA866AAB81CBC4E5C84E2EFF4394A1E6E406E8CBE9F622A21B66E468153839AAA09D770D15B7D2278EBE61254B956384F62A5B45A642ED17A013A7001AE3BC",
        }

        studentCardPayload = {
            "start": 0,
            "limit": 10000,
            "page": 1,
            "group": [{"property": "EduProgramNameAndType", "direction": "ASC"}],
            "sort": [{"property": "EduProgramNameAndType", "direction": "ASC"}]
        }

        session.post(loginUrl, json=loginPayload, headers=loginHeaders)
        response = session.post(studentCardUrl, json=studentCardPayload)
        formattedResponse = response.text.replace("\'", "\"")

        return formattedResponse