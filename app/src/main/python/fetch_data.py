import requests

loginUrl = "http://lms.tsu.ge/Home/Login"
studentCardUrl = "http://lms.tsu.ge/StudentCard/GetStudentProfilesVW2?_dc=1656070459063"

def login(username, password):
    with requests.Session() as session:
        loginPayload = {
            "UserName": username,
            "Password": password,
            "RememberMe": False,
            "ReturnUrl": "/home/studenttype"
        }

        loginHeaders = {
            "Cookie": "_ga=GA1.2.1582755388.1651498383; Culture=ka; cookiesession1=678A3E0FIKLMNOPQRSTUVWXYZABC859A; ASP.NET_SessionId=p0f1weczxfi1eub3swb03kyu; _gid=GA1.2.883746424.1656186307; _gat=1; .ASPXAUTHSP_STUDENTPORTAL=196F8BAF602AE0C17B7DBB67198F5F95BD3D0A787AB92ABA16AC38CAFE6DC236AD540DAC8A3F3EE5E1DD58143EBAA18EFF0EF6154B38E373667A33ACFF14D8188163F3153BDAD7E2A586EBFD2AD8A9060BB1DD44B1F93BF886A380045C9EAA0232152A3D7C32CFD94FEDD4F15D91D782D03E4AFB924FA63420B1D37A6292B8638DE820E6FDE523393775CB368B1937F646521FC0F1E7ED455DA58D9691B61C8E5C1B108A503F65A810F5362B393EA198FD410D317E458E29E1B6B943F321671EFCB829DEF930A46E9E7CFD8B78ABBFEE6172F40231F62C3D246D8A223998223E19697E3886738D562931120CC72921F39D1A5E75BF5EFCDE3919AD819EB8D6354AB81EFC66BEA789D650C131A4444744C94488FB578BF420962F23CEBD3290E1D8B7ABE11E52035C46EA80054E1488628272780365153FA667860535DA3B4406E1307D45014B9273B97DEA7B492A7257C1B8B3999287AB5F19DB71A8581ABDCD49134A7C1E3353F0BCF65AFBCD116377E71CA49AB946AC0069F37CA72D409A98C2ED4F22A382BF4CB8FB96E33EDE4730043D95D0BF25F8BDA3B7EC1AA1F93F938831AC37B6D42D358A1FDA5900F947F0551319348682139A1ACDA25D8F5C546D10129EA72BE64EBD1AF4BFCD4F78E1CA1F959F23D198B9791359E0CBD36159C0878BCB8164357DB265911EB5DC6BFF727932BA5990E9DC1FCAB8A2B7DA30DF05E446B18DE450B24FC7B9C4BED2BD844BF3C7D06F28738DA3E844E242EF1E34F81CD46482824EFA93DA34B913EFADDA7AD3F89BF2D7A3F4181CD5DEE2E52000C8DE45521350C65FCB3C0C74308C959B7E7D72AEB62414B99696642FB1B0FBAC651AF976E911762CFB056BFA4BB1B6D1E33A31B823E0D757016CEA1D57D733B1F19DCDA7EC2B8F4A39ABD95610E023303251F344C786605832F813E523EEA6C274B542F941266C9D1D2548E3A20E8D3D358ABDEB4792CC4045C68FA2EB595A526F8DBB20F02223309D6E852BB9B789DE88BEFADE0F80C49A7D72FB096FC6F0CB4E9AD3DF1F43D138EE03EF974EAB989023BB249787EAB32D2160B55BC348A681CBDE48C9AAD221FDBC6E4EB94A75CB868B6003351A51BDC5AFCFC92FEE752EA63DF32E8E27BA86E3E9CD55A27F0EA05D037DBDCD8ECA925758A030F34742D363E7B7996859C5315624BD85AD6EAFCF4A49ADFB826202B4D11F5BF62F5E60E375C69C635BAABF131C57BB7B21172508B7727B8E7E23E97D63B2E5E38E0B51362E15DF2A77E099C825908016017EC5A68329DC3822DB253D063F6578FF885A235145FA641C82B401BABFA85CE73D72E75D9243A84AD23574710112A04705DDA04435BEFD6E273370E3E2B55AC26DB2E458BE39561BF9E6C17D75DF5AC86DC4B392ABA93861E5F517D0A657C73A012D573162C7E285B5470943E4AB76C182E2B58B3299B41146FD3C353EBF47E18DCD467F6DBBF7E2FD8C1A028FFCC10665CC119FBE39FFA5AC03B63B1368B07EC7893AC0ABEC5EFF28209978CDB32A226B8AEE4D5DDA1AE55A26806E9760A947E3F58985CCE365869A4270253C18553D49508A1307",
        }

        studentCardPayload = {
            "start": 0,
            "limit": 10000,
            "page": 1,
            "group": [{"property": "EduProgramNameAndType", "direction": "ASC"}],
            "sort": [{"property": "EduProgramNameAndType", "direction": "ASC"}]
        }

        session.post(loginUrl, json=loginPayload, headers=loginHeaders)
        response = session.post(studentCardUrl, json=studentCardPayload)
        formattedResponse = response.text.replace("\'", "\"")

        return formattedResponse